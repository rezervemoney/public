(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3775],{2219:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var s=a(95155),n=a(12115),r=a(54073),i=a(53999);let l=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsxs)(r.bL,{ref:t,className:(0,i.cn)("relative flex w-full touch-none select-none items-center",a),...n,children:[(0,s.jsx)(r.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-gray-300",children:(0,s.jsx)(r.Q6,{className:"absolute h-full bg-primary"})}),(0,s.jsx)(r.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});l.displayName=r.bL.displayName},2962:(e,t,a)=>{"use strict";a.d(t,{v:()=>i});var s=a(58950),n=a(70030),r=a(95990);async function i(e,t){let a;let{abi:i,chainId:l,connector:o,...d}=t;a=t.account?t.account:(await (0,r.r)(e,{chainId:l,connector:o})).account;let c=e.getClient({chainId:l}),u=(0,n.T)(c,s.v,"simulateContract"),{result:m,request:p}=await u({...d,abi:i,account:a});return{chainId:c.chain.id,result:m,request:{...p,chainId:l}}}},18595:(e,t,a)=>{"use strict";a.d(t,{r:()=>u});var s=a(12115),n=a(2145),r=a(9428),i=a(2962),l=a(97351),o=a(75162),d=a(67474),c=a(99190);function u(){let{address:e}=(0,n.F)(),[t,a]=(0,s.useState)(null),[u,m]=(0,s.useState)(!1),[p,x]=(0,s.useState)(null),[y,f]=(0,s.useState)(null),h=(0,s.useCallback)(async(t,s)=>{if(e)try{let n=await (0,r.J)(d.$,{address:t,abi:c,functionName:"allowance",args:[e,s]});a(n)}catch(e){console.error("Error fetching allowance:",e),a(null)}},[e]),g=(0,s.useCallback)(async(t,a,s)=>{if(!e){x("Wallet not connected");return}m(!0),x(null),f(null);try{let{request:e}=await (0,i.v)(d.$,{address:t,abi:c,functionName:"approve",args:[a,s]}),n=await (0,l.E)(d.$,e);f(n),await (0,o.n)(d.$,{hash:n}),await h(t,a)}catch(e){console.error("Approval failed:",e),x(e instanceof Error?e.message:"Approval failed")}finally{m(!1)}},[e,h]);return{allowance:t,isApproving:u,approveError:p,approveTxHash:y,fetchAllowance:h,approve:g}}},35695:(e,t,a)=>{"use strict";var s=a(18999);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},40203:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>eO});var s=a(95155),n=a(12115),r=a(88482),i=a(40646),l=a(51154),o=a(99840),d=a(97168),c=a(41397),u=a(49026),m=a(2145),p=a(6874),x=a.n(p),y=a(8345),f=a(18595),h=a(53999),g=a(76736),v=a(89090),b=a(88579);function j(e){let{isOpen:t,onClose:a,stakeData:r}=e,[p,j]=(0,n.useState)("confirm"),{address:w}=(0,m.F)(),{isStaking:N,stakeError:k,stakeTxHash:A,zapAndStake:T}=(0,y.BC)(),{allowance:C,isApproving:R,approveError:S,approveTxHash:F,fetchAllowance:I,approve:M}=(0,f.r)(),E=r?Number.parseFloat(r.amount||"0"):0,P=r?(0,v.X)(r.amount,18):0n;(0,n.useEffect)(()=>{t&&w&&r&&"0x0000000000000000000000000000000000000000"!==r.tokenAddress&&I(r.tokenAddress,g.A.coreAddresses.uiHelperWrite)},[t,w,I,null==r?void 0:r.tokenAddress]);let D=async()=>{if(!w||!r){j("error");return}"0x0000000000000000000000000000000000000000"===r.tokenAddress?await $():!C||C<P?await B():await $()},B=async()=>{r&&(j("approve"),await M(r.tokenAddress,g.A.coreAddresses.uiHelperWrite,b.Ao.toString()),j("stake"))},$=async()=>{if(!w||!r){j("error");return}j("stake"),await T(r.amount,r.buyoutValue,w,r.tokenAddress,r.tokenDecimals),k?j("error"):A&&j("success")},Z=()=>{j("confirm"),a()},V=()=>{switch(p){case"confirm":case"error":default:return 0;case"approve":return 25;case"stake":return 50;case"success":return 100}};if(!r)return null;let W=(e=>{let t=Object.entries(g.A.tokens).find(t=>{let[a,s]=t;return s.address===e});return t?t[1].symbol:"SONIC"})(r.tokenAddress);return(0,s.jsx)(o.lG,{open:t,onOpenChange:Z,children:(0,s.jsxs)(o.Cf,{className:"sm:max-w-md bg-gray-100 border-gray-700",children:[(0,s.jsxs)(o.c7,{children:[(0,s.jsx)(o.L3,{className:"flex items-center gap-2 text-gray-700",children:"Stake RZR"}),(0,s.jsx)(o.rr,{className:"text-gray-400",children:"Automatically convert your assets into RZR and stake them"})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Transaction Progress"}),(0,s.jsxs)("span",{className:"text-gold-400",children:[V(),"%"]})]}),(0,s.jsx)(c.k,{value:V(),className:"h-2 bg-gray-300",indicatorClassName:"bg-gradient-to-r from-gold-500 to-gold-600"})]}),(0,s.jsxs)("div",{className:"rounded-md bg-white border border-gray-300 p-4 space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-gray-400",children:"Your Assets"}),(0,s.jsxs)("span",{className:"text-sm font-mono text-gray-700",children:[(0,h.ej)(E)," ",W]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-gray-400",children:"Buyout Value"}),(0,s.jsxs)("span",{className:"text-sm font-mono text-gold-400",children:[(0,h.ej)(r.buyoutValue)," RZR"]})]})]}),"success"===p&&(0,s.jsxs)(u.Fc,{className:"bg-green-500/10 border-green-500/30",children:[(0,s.jsx)(i.A,{className:"h-4 w-4 text-green-400"}),(0,s.jsxs)(u.TN,{className:"text-gray-600",children:[(0,s.jsx)("strong",{children:"Success!"})," Your assets have been converted and staked.",(0,s.jsx)("div",{className:"mt-2 space-y-1",children:(0,s.jsx)("div",{className:"text-xs font-mono text-green-400",children:(0,s.jsx)(x(),{href:"https://sonicscan.org/tx/".concat(A),target:"_blank",className:"text-green-600",children:"View Transaction on Explorer"})})})]})]}),"error"===p&&(0,s.jsx)(u.Fc,{className:"bg-red-500/10 border-red-500/30",children:(0,s.jsxs)(u.TN,{className:"text-gray-800",children:[(0,s.jsx)("strong",{children:"Error:"})," ",k||S||"Transaction failed"]})}),(0,s.jsxs)("div",{className:"space-y-3",children:["confirm"===p&&(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(d.$,{variant:"outline",className:"flex-1 text-gray-600 border-gray-500",onClick:Z,children:"Cancel"}),(0,s.jsx)(d.$,{className:"flex-1 bg-gradient-to-r from-blue-primary text-white to-yellow-primary",onClick:D,children:"Stake"})]})}),"approve"===p&&(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsx)(d.$,{className:"w-full bg-gradient-to-r text-white",disabled:R,onClick:B,children:R?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Approving..."]}):"Approve"})}),"stake"===p&&(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsx)(d.$,{className:"w-full bg-gradient-to-r from-gold-500 to-gold-600 hover:from-gold-600 hover:to-gold-700 text-white",disabled:N,onClick:$,children:N?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Staking..."]}):"Execute Stake"})}),"success"===p&&(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsx)(d.$,{className:"w-full bg-gradient-to-r from-gold-500 to-gold-600 hover:from-gold-600 hover:to-gold-700 text-black",onClick:Z,children:"Close"})}),"error"===p&&(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsx)(d.$,{variant:"outline",className:"w-full text-gray-600",onClick:()=>j("confirm"),children:"Try Again"})})]})]})]})})}var w=a(92138),N=a(89852),k=a(95784),A=a(72307),T=a(81100),C=a(2219),R=a(67667),S=a(1405);function F(e){let{onStake:t,currentAPR:a}=e,[r,i]=(0,n.useState)(""),[l,o]=(0,n.useState)("105"),[c,u]=(0,n.useState)(g.A.tokens.RZR.address),{address:p}=(0,m.F)(),{tokenInfos:x}=(0,R.t)(),y=(0,n.useMemo)(()=>{var e,t;return"0x0000000000000000000000000000000000000000"===c?null===(t=x.find(e=>e.token.toLowerCase()===g.wS))||void 0===t?void 0:t.oraclePriceInApp:null===(e=x.find(e=>e.token.toLowerCase()===c.toLowerCase()))||void 0===e?void 0:e.oraclePriceInApp},[c,x]),f=(0,n.useMemo)(()=>{let e=(0,S.J)(BigInt(y||"0"),18);return(Number(r)*Number(e)).toFixed(2)},[r,y]),v=(0,n.useMemo)(()=>{let e=Number(l)/100;return(Number(f)*e).toFixed(2)},[r,y,l]),{data:b}=(0,A.A)({address:p,chainId:T.T.id,token:"0x0000000000000000000000000000000000000000"===c?void 0:c}),j=Number(v),F=.05*j,I=Number(r||"0")*(a/100),M=e=>{let t=Object.entries(g.A.tokens).find(t=>{let[a,s]=t;return s.address===e});return t?t[1].symbol:""},E=()=>b?b.formatted:"0.00";return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,s.jsx)("label",{htmlFor:"stake-amount",className:"text-sm font-bold text-gray-700 playful-font",children:"Stake Amount"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"text-xs text-gray-600 font-mono font-medium playful-font",children:["Balance: ",(0,h.Af)(E())]}),(0,s.jsxs)(k.l6,{value:c,onValueChange:u,children:[(0,s.jsx)(k.bq,{className:"h-6 px-1 py-0 text-xs bg-transparent border-none text-gray-600 font-mono font-medium hover:bg-transparent focus:ring-0 focus:ring-offset-0 w-auto",children:(0,s.jsx)(k.yv,{children:M(c)})}),(0,s.jsx)(k.gC,{className:"bg-white border-gray-300",children:Object.entries(g.A.tokens).filter(e=>{let[t,a]=e;return"symbol"in a}).map(e=>{let[t,a]=e;return(0,s.jsx)(k.eb,{value:a.address,children:(0,s.jsx)("span",{children:a.symbol})},a.address)})})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"relative w-full",children:[(0,s.jsx)(N.p,{type:"number",min:0,max:Number(E()),placeholder:"0.00",value:r,onChange:e=>i(e.target.value),className:"bg-white/80 border-gray-300 text-gray-800 font-mono font-medium"}),(0,s.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-gray-400",children:M(c)})]}),(0,s.jsx)(d.$,{variant:"outline",size:"sm",className:"border-gray-300 text-gray-600 hover:bg-gray-100 font-medium playful-font",onClick:()=>i(E()),children:"Max"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("label",{htmlFor:"predictedAPR",className:"text-sm text-gray-600 font-bold mb-2",children:"Set Your Buyout Value"}),(0,s.jsxs)("span",{className:"text-sm text-gray-400",children:[Number(l).toFixed(2),"%"]})]}),(0,s.jsx)("div",{className:"px-2",children:(0,s.jsx)(C.A,{value:[Number(l)||100],min:100,max:1e3,step:1,onValueChange:e=>{o(e[0].toString())},className:"mt-2"})})]}),(0,s.jsxs)("div",{className:"rounded-md bg-white/70 border border-gray-300 p-4 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Estimated Rewards:"}),(0,s.jsxs)("span",{className:"text-sm text-gray-600 font-medium playful-font",children:[Number(I).toFixed(2)," RZR/year"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Your Estimated Stake:"}),(0,s.jsxs)("span",{className:"text-sm text-gray-600 font-medium playful-font",children:[Number(f).toFixed(2)," RZR"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Your Buyout Value:"}),(0,s.jsxs)("span",{className:"text-sm text-gray-600 font-medium playful-font",children:[j.toFixed(2)," RZR"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Your Upfront Tax:"}),(0,s.jsxs)("span",{className:"text-sm text-gray-600 font-medium playful-font",children:[F.toFixed(2)," RZR"]})]})]}),(0,s.jsx)("div",{className:"flex items-center justify-between text-sm",children:(0,s.jsxs)("span",{className:"text-gray-600 text-center",children:["By setting your buyout value, you will pay an upfront tax of"," ",(0,h.Af)(F)," RZR on your stake worth"," ",(0,h.Af)(r)," RZR to earn a yield of ~",(0,h.Af)(I)," RZR/year. If someone buys out your stake, they'll pay you ",(0,h.Af)(j)," RZR to take over your position."]})}),(0,s.jsxs)(d.$,{className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-bold playful-font",onClick:()=>{if(r&&v&&Number.parseFloat(r)>0&&Number.parseFloat(v)>0){var e,a;let s=(null===(a=Object.entries(g.A.tokens).find(e=>{let[t,a]=e;return a.address===c}))||void 0===a?void 0:null===(e=a[1])||void 0===e?void 0:e.decimals)||18;t({amount:r,buyoutValue:v,tokenAddress:c,tokenDecimals:s})}},disabled:!r||!v||0>=Number.parseFloat(r)||0>=Number.parseFloat(v)||Number.parseFloat(r)>Number(E()),children:["Stake RZR",(0,s.jsx)(w.A,{className:"ml-2 h-4 w-4"})]})]})}var I=a(58281),M=a(40184),E=a(29305);function P(){let[e,t]=(0,n.useState)(!1),[a,i]=(0,n.useState)(null),{currentAPR:l}=(0,I.B)(),{metrics:o}=(0,M.m)();return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(E.W,{title:"Stake RZR at ".concat(l,"% APR"),description:"Stake RZR and set your buy-out value. Pay 5% annual tax on predicted value, but risk being sniped if APR prediction is too low.",children:(0,s.jsxs)(r.Wu,{className:"space-y-6 relative z-10",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"text-center space-y-3 p-4 bg-white/50 rounded-md border-2 border-gray-200",children:[(0,s.jsx)("div",{className:"text-3xl",children:"⚡"}),(0,s.jsx)("h3",{className:"font-bold text-gray-800 playful-font",children:"Predict APR"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Set your own APR prediction and pay tax based on your valuation"})]}),(0,s.jsxs)("div",{className:"text-center space-y-3 p-4 bg-white/50 rounded-md border-2 border-gray-200",children:[(0,s.jsx)("div",{className:"text-3xl",children:"\uD83C\uDFAF"}),(0,s.jsx)("h3",{className:"font-bold text-gray-800 playful-font",children:"Snipe Protection"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Higher APR predictions provide better protection against sniping"})]}),(0,s.jsxs)("div",{className:"text-center space-y-3 p-4 bg-white/50 rounded-md border-2 border-gray-200",children:[(0,s.jsx)("div",{className:"text-3xl",children:"\uD83D\uDE9C"}),(0,s.jsx)("h3",{className:"font-bold text-gray-800 playful-font",children:"Compound Rewards"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Earn compounding rewards based on protocol performance"})]})]}),(0,s.jsx)(F,{onStake:e=>{i(e),t(!0)},currentAPR:Number(l)})]})}),(0,s.jsx)(j,{isOpen:e,onClose:()=>t(!1),stakeData:a})]})}var D=a(85185),B=a(46081),$=a(82284),Z=a(6101),V=a(61285),W=a(63655),z=a(39033),L=a(5845),O=a(94315),_="rovingFocusGroup.onEntryFocus",J={bubbles:!1,cancelable:!0},H="RovingFocusGroup",[G,U,Y]=(0,$.N)(H),[K,q]=(0,B.A)(H,[Y]),[X,Q]=K(H),ee=n.forwardRef((e,t)=>(0,s.jsx)(G.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,s.jsx)(G.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,s.jsx)(et,{...e,ref:t})})}));ee.displayName=H;var et=n.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:a,orientation:r,loop:i=!1,dir:l,currentTabStopId:o,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:m=!1,...p}=e,x=n.useRef(null),y=(0,Z.s)(t,x),f=(0,O.jH)(l),[h=null,g]=(0,L.i)({prop:o,defaultProp:d,onChange:c}),[v,b]=n.useState(!1),j=(0,z.c)(u),w=U(a),N=n.useRef(!1),[k,A]=n.useState(0);return n.useEffect(()=>{let e=x.current;if(e)return e.addEventListener(_,j),()=>e.removeEventListener(_,j)},[j]),(0,s.jsx)(X,{scope:a,orientation:r,dir:f,loop:i,currentTabStopId:h,onItemFocus:n.useCallback(e=>g(e),[g]),onItemShiftTab:n.useCallback(()=>b(!0),[]),onFocusableItemAdd:n.useCallback(()=>A(e=>e+1),[]),onFocusableItemRemove:n.useCallback(()=>A(e=>e-1),[]),children:(0,s.jsx)(W.sG.div,{tabIndex:v||0===k?-1:0,"data-orientation":r,...p,ref:y,style:{outline:"none",...e.style},onMouseDown:(0,D.m)(e.onMouseDown,()=>{N.current=!0}),onFocus:(0,D.m)(e.onFocus,e=>{let t=!N.current;if(e.target===e.currentTarget&&t&&!v){let t=new CustomEvent(_,J);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=w().filter(e=>e.focusable);er([e.find(e=>e.active),e.find(e=>e.id===h),...e].filter(Boolean).map(e=>e.ref.current),m)}}N.current=!1}),onBlur:(0,D.m)(e.onBlur,()=>b(!1))})})}),ea="RovingFocusGroupItem",es=n.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:a,focusable:r=!0,active:i=!1,tabStopId:l,...o}=e,d=(0,V.B)(),c=l||d,u=Q(ea,a),m=u.currentTabStopId===c,p=U(a),{onFocusableItemAdd:x,onFocusableItemRemove:y}=u;return n.useEffect(()=>{if(r)return x(),()=>y()},[r,x,y]),(0,s.jsx)(G.ItemSlot,{scope:a,id:c,focusable:r,active:i,children:(0,s.jsx)(W.sG.span,{tabIndex:m?0:-1,"data-orientation":u.orientation,...o,ref:t,onMouseDown:(0,D.m)(e.onMouseDown,e=>{r?u.onItemFocus(c):e.preventDefault()}),onFocus:(0,D.m)(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:(0,D.m)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey){u.onItemShiftTab();return}if(e.target!==e.currentTarget)return;let t=function(e,t,a){var s;let n=(s=e.key,"rtl"!==a?s:"ArrowLeft"===s?"ArrowRight":"ArrowRight"===s?"ArrowLeft":s);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(n))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(n)))return en[n]}(e,u.orientation,u.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let a=p().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)a.reverse();else if("prev"===t||"next"===t){"prev"===t&&a.reverse();let s=a.indexOf(e.currentTarget);a=u.loop?function(e,t){return e.map((a,s)=>e[(t+s)%e.length])}(a,s+1):a.slice(s+1)}setTimeout(()=>er(a))}})})})});es.displayName=ea;var en={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function er(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=document.activeElement;for(let s of e)if(s===a||(s.focus({preventScroll:t}),document.activeElement!==a))return}var ei=a(28905),el="Tabs",[eo,ed]=(0,B.A)(el,[q]),ec=q(),[eu,em]=eo(el),ep=n.forwardRef((e,t)=>{let{__scopeTabs:a,value:n,onValueChange:r,defaultValue:i,orientation:l="horizontal",dir:o,activationMode:d="automatic",...c}=e,u=(0,O.jH)(o),[m,p]=(0,L.i)({prop:n,onChange:r,defaultProp:i});return(0,s.jsx)(eu,{scope:a,baseId:(0,V.B)(),value:m,onValueChange:p,orientation:l,dir:u,activationMode:d,children:(0,s.jsx)(W.sG.div,{dir:u,"data-orientation":l,...c,ref:t})})});ep.displayName=el;var ex="TabsList",ey=n.forwardRef((e,t)=>{let{__scopeTabs:a,loop:n=!0,...r}=e,i=em(ex,a),l=ec(a);return(0,s.jsx)(ee,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:n,children:(0,s.jsx)(W.sG.div,{role:"tablist","aria-orientation":i.orientation,...r,ref:t})})});ey.displayName=ex;var ef="TabsTrigger",eh=n.forwardRef((e,t)=>{let{__scopeTabs:a,value:n,disabled:r=!1,...i}=e,l=em(ef,a),o=ec(a),d=eb(l.baseId,n),c=ej(l.baseId,n),u=n===l.value;return(0,s.jsx)(es,{asChild:!0,...o,focusable:!r,active:u,children:(0,s.jsx)(W.sG.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:d,...i,ref:t,onMouseDown:(0,D.m)(e.onMouseDown,e=>{r||0!==e.button||!1!==e.ctrlKey?e.preventDefault():l.onValueChange(n)}),onKeyDown:(0,D.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&l.onValueChange(n)}),onFocus:(0,D.m)(e.onFocus,()=>{let e="manual"!==l.activationMode;u||r||!e||l.onValueChange(n)})})})});eh.displayName=ef;var eg="TabsContent",ev=n.forwardRef((e,t)=>{let{__scopeTabs:a,value:r,forceMount:i,children:l,...o}=e,d=em(eg,a),c=eb(d.baseId,r),u=ej(d.baseId,r),m=r===d.value,p=n.useRef(m);return n.useEffect(()=>{let e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,s.jsx)(ei.C,{present:i||m,children:a=>{let{present:n}=a;return(0,s.jsx)(W.sG.div,{"data-state":m?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":c,hidden:!n,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:p.current?"0s":void 0},children:n&&l})}})});function eb(e,t){return"".concat(e,"-trigger-").concat(t)}function ej(e,t){return"".concat(e,"-content-").concat(t)}ev.displayName=eg;let ew=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(ey,{ref:t,className:(0,h.cn)("inline-flex items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...n})});ew.displayName=ey.displayName;let eN=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(eh,{ref:t,className:(0,h.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...n})});eN.displayName=eh.displayName;let ek=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(ev,{ref:t,className:(0,h.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...n})});ek.displayName=ev.displayName;var eA=a(98511),eT=a(37777);function eC(e){let{totalStaked:t,totalRewards:a,totalBuyoutValue:n,drePrice:r}=e;return(0,s.jsxs)("div",{className:"mb-6 grid grid-cols-3 gap-4 rounded-md bg-white/70 border border-gray-300 p-6 backdrop-blur-sm",children:[(0,s.jsx)(eT.Bc,{delayDuration:0,children:(0,s.jsxs)(eT.m_,{children:[(0,s.jsx)(eT.k$,{asChild:!0,children:(0,s.jsxs)("div",{className:"space-y-2 cursor-help",children:[(0,s.jsx)("div",{className:"text-sm text-gray-400 font-medium playful-font",children:"Your Staked RZR"}),(0,s.jsxs)("div",{className:"text-2xl font-mono font-black text-gray-800 playful-font",children:[(0,h.Af)(t)," sRZR"]}),(0,s.jsxs)("div",{className:"text-xs text-gray-600 font-medium playful-font",children:["≈ ",(0,h.Af)(Number(t)*r,"$")]})]})}),(0,s.jsx)(eT.ZI,{children:(0,s.jsx)("p",{className:"max-w-xs text-xs",children:"This is the total amount of RZR tokens that you have staked across all your positions."})})]})}),(0,s.jsx)(eT.Bc,{delayDuration:0,children:(0,s.jsxs)(eT.m_,{children:[(0,s.jsx)(eT.k$,{asChild:!0,children:(0,s.jsxs)("div",{className:"space-y-2 cursor-help",children:[(0,s.jsx)("div",{className:"text-sm text-gray-400 font-medium playful-font",children:"Your Buyout Value"}),(0,s.jsxs)("div",{className:"text-2xl font-mono font-black text-gray-800 playful-font",children:[(0,h.Af)(n)," RZR"]}),(0,s.jsxs)("div",{className:"text-xs text-gray-600 font-medium playful-font",children:["≈ ",(0,h.Af)(Number(n)*r,"$")]})]})}),(0,s.jsx)(eT.ZI,{children:(0,s.jsx)("p",{className:"max-w-xs text-xs",children:"How much you'll receive if someone buys out all your stakes."})})]})}),(0,s.jsx)(eT.Bc,{delayDuration:0,children:(0,s.jsxs)(eT.m_,{children:[(0,s.jsx)(eT.k$,{asChild:!0,children:(0,s.jsxs)("div",{className:"space-y-2 cursor-help",children:[(0,s.jsx)("div",{className:"text-sm text-gray-400 font-medium playful-font",children:"Your Unclaimed Rewards"}),(0,s.jsxs)("div",{className:"text-2xl font-mono font-black text-gray-800 playful-font",children:[a," RZR"]}),(0,s.jsxs)("div",{className:"text-xs text-gray-600 font-medium playful-font",children:["≈ $",(Number.parseFloat(a)*r).toFixed(2)]})]})}),(0,s.jsx)(eT.ZI,{children:(0,s.jsx)("p",{className:"max-w-xs text-xs",children:"These are the rewards that you have earned but have not yet claimed."})})]})})]})}function eR(){let{positions:e,claimAllRewards:t}=(0,I.B)(),{metrics:a}=(0,M.m)(),n=(null==a?void 0:a.tokenPrice)?Number(a.tokenPrice):0,i=e.reduce((e,t)=>e+Number((0,S.J)(BigInt(t.rewards),18)),0);return(0,s.jsx)(E.W,{title:"Stakes Overview",description:"Manage your staked positions and claim all your RZR rewards.",children:(0,s.jsxs)(r.Wu,{children:[(0,s.jsx)(eC,{totalStaked:e.reduce((e,t)=>e+Number((0,S.J)(BigInt(t.amount),18)),0).toFixed(2),totalRewards:i.toFixed(2),totalBuyoutValue:e.reduce((e,t)=>e+Number((0,S.J)(BigInt(t.declaredValue),18)),0).toFixed(2),drePrice:n}),(0,s.jsx)("div",{className:"flex items-center justify-center",children:(0,s.jsx)(d.$,{className:"w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-bold playful-font",variant:"default",size:"sm",disabled:0===i,onClick:t,children:"Claim All Rewards"})})]})})}let eS=(0,a(19946).A)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);var eF=a(1243);function eI(e){let{isOpen:t,onOpenChange:a,positionId:n,cooldownProgress:r,cooldownTimeLeft:i,onCancelUnstake:l}=e;return(0,s.jsx)(o.lG,{open:t,onOpenChange:a,children:(0,s.jsxs)(o.Cf,{className:"sm:max-w-md bg-gray-100",children:[(0,s.jsxs)(o.c7,{children:[(0,s.jsx)(o.L3,{className:"text-black",children:"Unstaking Position"}),(0,s.jsxs)(o.rr,{className:"text-black",children:["Position #",n," is being unstaked. This process requires a 72-hour cooldown period."]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-black",children:"Cooldown Progress"}),(0,s.jsxs)("span",{className:"text-black",children:[r.toFixed(1),"%"]})]}),(0,s.jsx)(c.k,{value:r,className:"h-2 bg-gray-700",indicatorClassName:"bg-gradient-to-r from-gold-500 to-gold-600"}),(0,s.jsxs)("div",{className:"text-center text-sm text-black",children:["Time remaining: ",i]})]}),(0,s.jsxs)(u.Fc,{className:"bg-gray-200 border-gray-300",children:[(0,s.jsx)(eF.A,{className:"h-4 w-4 text-black"}),(0,s.jsxs)(u.TN,{className:"text-black",children:[(0,s.jsx)("strong",{children:"Note:"})," You can cancel the unstaking process during the cooldown period. During the cooldown period, you do not receive any rewards."]})]}),(0,s.jsxs)(o.Es,{children:[(0,s.jsx)(d.$,{variant:"outline",onClick:l,children:"Cancel Unstaking"}),(0,s.jsx)(d.$,{variant:"outline",onClick:()=>a(!1),children:"Close"})]})]})]})})}function eM(e){let{position:t}=e,{isConnected:a}=(0,m.F)(),{positions:r,currentAPR:i,unstake:l,startUnstake:c,stake:u,cancelUnstake:p}=(0,I.B)(),{metrics:x}=(0,M.m)(),[y,f]=(0,n.useState)(!1),[h,g]=(0,n.useState)(null),[v,b]=(0,n.useState)(0),[j,w]=(0,n.useState)("72:00:00"),[k,A]=(0,n.useState)(null),[T,C]=(0,n.useState)(!1),[R,F]=(0,n.useState)(null),[E,P]=(0,n.useState)(""),[D,B]=(0,n.useState)(!1),[$,Z]=(0,n.useState)(null),[V,W]=(0,n.useState)(""),z=()=>{f(!1),h&&clearInterval(h),g(null)},L=async e=>{let t=1e3*Number(e.cooldownEnd);if(t<Date.now()&&0!=t){await l(e.id);return}0==t&&(await c(e.id),t=Date.now()+2592e5),A(e),f(!0),b(0),g(setInterval(()=>{let e=Date.now(),a=100-(t-e)/2592e5*100,s=Math.floor((100-a)*72/100),n=Math.floor(((100-a)*72/100-s)*60),r=Math.floor((((100-a)*72/100-s)*60-n)*60);w("".concat(s.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0"))),b(a)},1e3))},O=async()=>{if(R&&E)try{await u(R.amount),C(!1),F(null),P("")}catch(e){console.error("Failed to update APR:",e)}},_=async()=>{k&&(await p(k.id),f(!1),A(null),z())},J=async()=>{if($&&V)try{await u(V),B(!1),Z(null),W("")}catch(e){console.error("Failed to add to position:",e)}};return(0,s.jsxs)("div",{className:"rounded-md bg-white border border-gray-300 p-4 space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2",children:[(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsxs)("div",{className:"font-bold text-gray-800",children:["Stake #",t.id]})}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:(0,s.jsx)(eT.Bc,{delayDuration:0,children:(0,s.jsxs)(eT.m_,{children:[(0,s.jsx)(eT.k$,{asChild:!0,children:(0,s.jsxs)(d.$,{size:"sm",variant:"outline",onClick:()=>L(t),children:[(0,s.jsx)(eS,{className:"h-3.5 w-3.5 mr-1"}),"Unstake",(0,s.jsx)("span",{children:Number(t.cooldownEnd)>0?"(In Progress)":""})]})}),(0,s.jsx)(eT.ZI,{children:(0,s.jsx)("p",{className:"text-xs",children:"Initiate withdrawal process with mandatory cooling period for security and stability."})})]})})})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)(eT.Bc,{delayDuration:0,children:(0,s.jsxs)(eT.m_,{children:[(0,s.jsx)(eT.k$,{asChild:!0,children:(0,s.jsxs)("div",{className:"space-y-1 cursor-help",children:[(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"Staked Amount"}),(0,s.jsxs)("div",{className:"text-lg font-mono font-bold text-black",children:[Number((0,S.J)(BigInt(t.amount),18)).toFixed(2)," ","RZR"]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:["≈ $",(Number((0,S.J)(BigInt(t.amount),18))*((null==x?void 0:x.tokenPrice)||0)).toFixed(2)]})]})}),(0,s.jsx)(eT.ZI,{children:(0,s.jsx)("p",{className:"text-xs",children:"Total amount of RZR tokens staked in this position."})})]})}),(0,s.jsx)(eT.Bc,{delayDuration:0,children:(0,s.jsxs)(eT.m_,{children:[(0,s.jsx)(eT.k$,{asChild:!0,children:(0,s.jsxs)("div",{className:"space-y-1 cursor-help",children:[(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"Unclaimed Rewards"}),(0,s.jsxs)("div",{className:"text-lg font-mono font-bold text-green-400",children:[Number((0,S.J)(BigInt(t.rewards),18)).toFixed(2)," ","RZR"]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:["≈ $",(Number((0,S.J)(BigInt(t.rewards),18))*((null==x?void 0:x.tokenPrice)||0)).toFixed(2)]})]})}),(0,s.jsx)(eT.ZI,{children:(0,s.jsx)("p",{className:"text-xs",children:"Accumulated rewards for this position."})})]})}),(0,s.jsx)(eT.Bc,{delayDuration:0,children:(0,s.jsxs)(eT.m_,{children:[(0,s.jsx)(eT.k$,{asChild:!0,children:(0,s.jsxs)("div",{className:"space-y-1 cursor-help",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-400",children:[" ","Your Buyout Value"]}),(0,s.jsxs)("div",{className:"text-lg font-mono font-bold text-gold-400",children:[Number((0,S.J)(BigInt(t.declaredValue),18)).toFixed(2)," ","RZR"]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:["≈ $",(Number((0,S.J)(BigInt(t.declaredValue),18))*((null==x?void 0:x.tokenPrice)||0)).toFixed(2)]})]})}),(0,s.jsx)(eT.ZI,{children:(0,s.jsx)("p",{className:"text-xs",children:"Accumulated rewards for this position."})})]})})]}),(0,s.jsx)(o.lG,{open:T,onOpenChange:z,children:(0,s.jsxs)(o.Cf,{className:"sm:max-w-md bg-gray-900 border-gray-700",children:[(0,s.jsxs)(o.c7,{children:[(0,s.jsx)(o.L3,{className:"text-white",children:"Edit APR Prediction"}),(0,s.jsxs)(o.rr,{className:"text-gray-400",children:["Adjust your APR prediction for position ",null==R?void 0:R.id]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"new-apr",className:"text-sm font-medium text-gray-300",children:"New APR Prediction (%)"}),(0,s.jsx)(N.p,{id:"new-apr",placeholder:(Number(i)/100).toFixed(2),value:E,onChange:e=>P(e.target.value),className:"mt-2 bg-gray-800/50 border-gray-600 text-white font-mono"})]}),(0,s.jsxs)(o.Es,{children:[(0,s.jsx)(d.$,{variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-800",onClick:()=>C(!1),children:"Cancel"}),(0,s.jsx)(d.$,{className:"bg-gradient-to-r from-gold-500 to-gold-600 hover:from-gold-600 hover:to-gold-700 text-black",onClick:O,children:"Save Changes"})]})]})]})}),(0,s.jsx)(o.lG,{open:D,onOpenChange:B,children:(0,s.jsxs)(o.Cf,{className:"sm:max-w-md bg-gray-900 border-gray-700",children:[(0,s.jsxs)(o.c7,{children:[(0,s.jsx)(o.L3,{className:"text-white",children:"Add to Position"}),(0,s.jsxs)(o.rr,{className:"text-gray-400",children:["Add more RZR tokens to position ",null==$?void 0:$.id]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"additional-amount",className:"text-sm font-medium text-gray-300",children:"Additional Amount"}),(0,s.jsx)(N.p,{id:"additional-amount",placeholder:"0.00",value:V,onChange:e=>W(e.target.value),className:"mt-2 bg-gray-800/50 border-gray-600 text-white font-mono"})]}),(0,s.jsxs)(o.Es,{children:[(0,s.jsx)(d.$,{variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-800",onClick:()=>B(!1),children:"Cancel"}),(0,s.jsx)(d.$,{className:"bg-gradient-to-r from-gold-500 to-gold-600 hover:from-gold-600 hover:to-gold-700 text-black",onClick:J,children:"Add to Position"})]})]})]})}),(0,s.jsx)(eI,{isOpen:y,onOpenChange:f,positionId:null==k?void 0:k.id,cooldownProgress:v,cooldownTimeLeft:j,onCancelUnstake:_})]},t.id)}function eE(e){let{setActiveTab:t}=e,{positions:a}=(0,I.B)();return(0,s.jsx)(E.W,{title:"Your Positions",description:"Manage your active stake positions, adjust APR predictions, or unstake",children:(0,s.jsx)(r.Wu,{children:0===a.length?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("p",{className:"text-gray-400",children:"You don't have any active stake positions."}),(0,s.jsx)(d.$,{onClick:()=>t("stake"),className:"mt-4 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white",children:"Stake RZR"})]}):(0,s.jsx)("div",{className:"space-y-4",children:a.map(e=>(0,s.jsx)(eM,{position:e},e.id))})})})}var eP=a(35695),eD=a(34540),eB=a(83869);function e$(e){let{vault:t,onClose:a}=e,[r,o]=(0,n.useState)(""),[c,p]=(0,n.useState)("confirm"),{address:y}=(0,m.F)(),b=(0,eD.wA)(),{isDepositing:j,depositError:w,depositTxHash:k}=(0,eD.d4)(e=>e.vault),{allowance:T,isApproving:C,approveError:R,approveTxHash:F,fetchAllowance:I,approve:M}=(0,f.r)(),{data:E,isLoading:P}=(0,A.A)({address:y,token:g.A.tokens.RZR.address});(0,n.useEffect)(()=>{y&&t&&I(g.A.tokens.RZR.address,t.address)},[y,t,I,r]);let D=async()=>{if(!y||!t){p("error");return}let e=(0,v.X)(r,g.A.tokens.RZR.decimals);!T||T<e?await B():await $()},B=async()=>{t&&(p("approve"),await M(g.A.tokens.RZR.address,t.address,"115792089237316195423570985008687907853269984665640564039457584007913129639935"),p("deposit"))},$=async()=>{if(!y||!t){p("error");return}p("deposit"),await b((0,eB.zz)({vaultAddress:t.address,amount:(0,v.X)(r,g.A.tokens.RZR.decimals),userAddress:y})),w?p("error"):k&&p("success")},Z=()=>{p("confirm"),o(""),b((0,eB.xt)()),a()};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("label",{htmlFor:"vault-amount",className:"text-sm font-bold text-gray-700 playful-font",children:"Amount to deposit"}),(0,s.jsxs)("div",{className:"text-xs text-gray-600 font-mono font-medium playful-font",children:["Balance:"," ",P?(0,s.jsx)(l.A,{className:"inline h-3 w-3 animate-spin"}):(0,h.Af)((0,S.J)((null==E?void 0:E.value)||0n,g.A.tokens.RZR.decimals))]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"relative w-full",children:[(0,s.jsx)(N.p,{id:"vault-amount",type:"number",placeholder:"0.00",value:r,onChange:e=>o(e.target.value),className:"bg-white/80 border-gray-300 text-gray-800 font-mono font-medium pr-16"}),(0,s.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-sm font-medium text-gray-500",children:g.A.tokens.RZR.symbol})]}),(0,s.jsx)(d.$,{variant:"outline",size:"sm",className:"border-gray-300 text-gray-600 hover:bg-gray-100 font-medium playful-font",onClick:()=>o((0,S.J)((null==E?void 0:E.value)||0n,g.A.tokens.RZR.decimals)),children:"Max"})]})]}),"success"===c&&(0,s.jsxs)(u.Fc,{className:"bg-green-500/10 border-green-500/30",children:[(0,s.jsx)(i.A,{className:"h-4 w-4 text-green-400"}),(0,s.jsxs)(u.TN,{className:"text-gray-600",children:[(0,s.jsx)("strong",{children:"Success!"})," Your deposit has been processed.",(0,s.jsx)("div",{className:"mt-2 space-y-1",children:(0,s.jsx)("div",{className:"text-xs font-mono text-green-400",children:(0,s.jsx)(x(),{href:"https://sonicscan.org/tx/".concat(k),target:"_blank",className:"text-green-600",children:"View Transaction on Explorer"})})})]})]}),"error"===c&&(0,s.jsxs)(u.Fc,{className:"bg-red-500/10 border-red-500/30",children:[(0,s.jsx)(eF.A,{className:"h-4 w-4 text-red-400"}),(0,s.jsxs)(u.TN,{className:"text-gray-800",children:[(0,s.jsx)("strong",{children:"Error:"})," ",w||R||"Transaction failed"]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:["confirm"===c&&(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(d.$,{variant:"outline",className:"flex-1",onClick:Z,children:"Cancel"}),(0,s.jsx)(d.$,{className:"flex-1",onClick:D,children:"Deposit"})]}),"approve"===c&&(0,s.jsx)(d.$,{className:"w-full bg-gradient-to-r from-blue-primary text-white to-yellow-primary",disabled:C,onClick:B,children:C?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Approving..."]}):"Approve"}),"deposit"===c&&(0,s.jsx)(d.$,{className:"w-full bg-gradient-to-r from-blue-primary text-white to-yellow-primary",disabled:j,onClick:$,children:j?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Depositing..."]}):"Execute Deposit"}),"success"===c&&(0,s.jsx)(d.$,{className:"w-full bg-gradient-to-r from-blue-primary text-white to-yellow-primary",onClick:Z,children:"Close"}),"error"===c&&(0,s.jsx)(d.$,{variant:"outline",className:"w-full text-gray-600",onClick:()=>p("confirm"),children:"Try Again"})]})]})}function eZ(e){let{vault:t,onClose:a}=e,[r,o]=(0,n.useState)(""),[c,p]=(0,n.useState)("confirm"),{address:y}=(0,m.F)(),f=(0,eD.wA)(),{isWithdrawing:g,withdrawError:b,withdrawTxHash:j}=(0,eD.d4)(e=>e.vault),w=async()=>{if(!y||!t){p("error");return}await k()},k=async()=>{if(!y||!t){p("error");return}p("withdraw"),await f((0,eB.ne)({vaultAddress:t.address,amount:(0,v.X)(r,t.decimals),userAddress:y})),b?p("error"):j&&p("success")},A=()=>{p("confirm"),o(""),f((0,eB.xt)()),a()};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("label",{htmlFor:"vault-amount",className:"text-sm font-bold text-gray-700 playful-font",children:"Amount to withdraw"}),(0,s.jsxs)("div",{className:"text-xs text-gray-600 font-mono font-medium playful-font",children:["Balance:"," ",(0,h.Af)((0,S.J)(BigInt(t.userBalance),t.decimals))]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"relative w-full",children:[(0,s.jsx)(N.p,{id:"vault-amount",type:"number",placeholder:"0.00",value:r,onChange:e=>o(e.target.value),className:"bg-white/80 border-gray-300 text-gray-800 font-mono font-medium pr-16"}),(0,s.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-sm font-medium text-gray-500",children:t.symbol})]}),(0,s.jsx)(d.$,{variant:"outline",size:"sm",className:"border-gray-300 text-gray-600 hover:bg-gray-100 font-medium playful-font",onClick:()=>o((0,S.J)(BigInt(t.userBalance),t.decimals)),children:"Max"})]})]}),"success"===c&&(0,s.jsxs)(u.Fc,{className:"bg-green-500/10 border-green-500/30",children:[(0,s.jsx)(i.A,{className:"h-4 w-4 text-green-400"}),(0,s.jsxs)(u.TN,{className:"text-gray-600",children:[(0,s.jsx)("strong",{children:"Success!"})," Your withdrawal has been processed.",(0,s.jsx)("div",{className:"mt-2 space-y-1",children:(0,s.jsx)("div",{className:"text-xs font-mono text-green-400",children:(0,s.jsx)(x(),{href:"https://sonicscan.org/tx/".concat(j),target:"_blank",className:"text-green-600",children:"View Transaction on Explorer"})})})]})]}),"error"===c&&(0,s.jsxs)(u.Fc,{className:"bg-red-500/10 border-red-500/30",children:[(0,s.jsx)(eF.A,{className:"h-4 w-4 text-red-400"}),(0,s.jsxs)(u.TN,{className:"text-gray-800",children:[(0,s.jsx)("strong",{children:"Error:"})," ",b||"Transaction failed"]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:["confirm"===c&&(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(d.$,{variant:"outline",className:"flex-1",onClick:A,children:"Cancel"}),(0,s.jsx)(d.$,{className:"flex-1",onClick:w,children:"Withdraw"})]}),"withdraw"===c&&(0,s.jsx)(d.$,{className:"w-full bg-gradient-to-r from-blue-primary text-white to-yellow-primary",disabled:g,onClick:k,children:g?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Withdrawing..."]}):"Execute Withdraw"}),"success"===c&&(0,s.jsx)(d.$,{className:"w-full  bg-gradient-to-r from-blue-primary text-white to-yellow-primary",onClick:A,children:"Close"}),"error"===c&&(0,s.jsx)(d.$,{variant:"outline",className:"w-full text-gray-600",onClick:()=>p("confirm"),children:"Try Again"})]})]})}function eV(e){let{isOpen:t,onClose:a,vault:r}=e,[i,l]=(0,n.useState)("deposit");return r?(0,s.jsx)(o.lG,{open:t,onOpenChange:a,children:(0,s.jsxs)(o.Cf,{className:"sm:max-w-md bg-gray-100 border-gray-700",children:[(0,s.jsxs)(o.c7,{children:[(0,s.jsxs)(o.L3,{className:"flex items-center gap-2 text-gray-700",children:[r.name," Vault"]}),(0,s.jsx)(o.rr,{className:"text-gray-500",children:"deposit"===i?r.depositDescription:r.withdrawDescription})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex space-x-2 border-b border-gray-200",children:[(0,s.jsx)("button",{className:"px-4 py-2 text-sm font-medium ".concat("deposit"===i?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>l("deposit"),children:"Deposit"}),(0,s.jsx)("button",{className:"px-4 py-2 text-sm font-medium ".concat("withdraw"===i?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>l("withdraw"),children:"Withdraw"})]}),"deposit"===i?(0,s.jsx)(e$,{vault:r,onClose:a}):(0,s.jsx)(eZ,{vault:r,onClose:a})]})]})}):null}var eW=a(12149);let ez=()=>{let e=(0,eD.wA)(),{vaults:t,loading:a,error:s}=(0,eD.d4)(e=>e.vault),{address:r}=(0,m.F)();return(0,n.useEffect)(()=>(Object.values(g.A.coreAddresses.vaults).forEach(t=>{e((0,eB.tk)({vault:t,userAddress:r}))}),()=>{e((0,eB.xt)())}),[e,r]),{vaults:t,loading:a,error:s}};function eL(){let[e,t]=(0,n.useState)(!1),[a,i]=(0,n.useState)(null),{vaults:l,loading:o}=ez(),c=e=>{i(e),t(!0)};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(E.W,{title:"Vaults",description:"Vaults are a way to earn rewards by staking your assets.",children:(0,s.jsxs)(r.Wu,{children:[(0,s.jsx)(eW.A,{features:[{icon:"\uD83D\uDCB0",title:"Auto-Compound",description:"Vaults automatically reinvest your rewards for maximum yield."},{icon:"\uD83D\uDD12",title:"Secure & Audited",description:"Your assets are protected in secure, audited smart contracts."},{icon:"⚡",title:"Flexible Withdrawals",description:"Withdraw your funds at any time with no lockups."}]}),(0,s.jsxs)("div",{className:"mt-8",children:[(0,s.jsxs)("div",{className:"hidden md:grid grid-cols-4 gap-4 px-2 pb-2 text-xs text-gray-400 font-semibold uppercase",children:[(0,s.jsx)("div",{children:"Asset"}),(0,s.jsx)("div",{className:"text-center",children:"APR"}),(0,s.jsx)("div",{className:"text-center",children:"My Balance"}),(0,s.jsx)("div",{className:"text-right",children:"Actions"})]}),(0,s.jsx)("div",{className:"space-y-3",children:o?(0,s.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Loading vaults..."}):Object.values(l).map(e=>(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 rounded-lg bg-white/60 dark:bg-gray-900/70 border border-gray-200 dark:border-gray-800 hover:border-purple-400 transition-colors shadow-sm",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)("div",{className:"font-semibold text-base text-gray-900 dark:text-gray-100 playful-font",children:e.symbol})}),(0,s.jsx)("div",{className:"flex items-center justify-center",children:(0,s.jsx)("a",{href:"#",target:"_blank",rel:"noopener noreferrer",className:"text-orange-500 dark:text-orange-400 hover:underline font-medium text-sm playful-font",children:"Coming Soon"})}),(0,s.jsx)("div",{className:"flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-gray-900 dark:text-gray-100 text-sm playful-font",children:(0,h.Af)((0,S.J)(BigInt(e.userBalance),e.decimals))})}),(0,s.jsx)("div",{className:"flex items-center justify-end",children:(0,s.jsx)(d.$,{className:"bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white font-semibold px-5 py-2 rounded-lg shadow-md transition-all duration-150 focus:ring-2 focus:ring-green-400 focus:outline-none text-sm playful-font",onClick:()=>c(e),children:"View"})})]},e.address))})]})]})}),(0,s.jsx)(eV,{isOpen:e,onClose:()=>t(!1),vault:a})]})}function eO(){return(0,s.jsx)(n.Suspense,{fallback:(0,s.jsx)("div",{}),children:(0,s.jsx)(e_,{})})}function e_(){let e=(0,eP.useSearchParams)(),t=(0,eP.useRouter)(),a=e.get("tab")||"stake",[r,i]=(0,n.useState)(a);return(0,n.useEffect)(()=>{let a=new URLSearchParams(e);a.set("tab",r),t.replace("?".concat(a.toString()))},[r,e,t]),(0,s.jsx)("div",{className:"max-w-[720px] mx-auto space-y-8",children:(0,s.jsxs)(ep,{defaultValue:a,className:"w-full",value:r,onValueChange:i,children:[(0,s.jsx)("div",{className:"bg-gray-50/50 rounded-3xl",children:(0,s.jsxs)(ew,{className:"grid w-full grid-cols-4 bg-transparent",children:[(0,s.jsx)(eN,{value:"stake",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-500 data-[state=active]:to-green-500 data-[state=active]:text-white font-bold rounded-2xl py-3 transition-all duration-300",children:"Stake"}),(0,s.jsx)(eN,{value:"manage",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-500 data-[state=active]:to-green-500 data-[state=active]:text-white font-bold rounded-2xl py-3 transition-all duration-300",children:"Manage"}),(0,s.jsx)(eN,{value:"buy",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-500 data-[state=active]:to-pink-500 data-[state=active]:text-white font-bold rounded-2xl py-3 transition-all duration-300",children:"Buy Stakes"}),(0,s.jsx)(eN,{value:"vaults",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-green-500 data-[state=active]:to-blue-500 data-[state=active]:text-white font-bold rounded-2xl py-3 transition-all duration-300",children:"Vaults"})]})}),(0,s.jsxs)("div",{className:"py-6",children:[(0,s.jsx)(ek,{value:"stake",className:"mt-0",children:(0,s.jsx)(P,{})}),(0,s.jsx)(ek,{value:"manage",className:"mt-0",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(eR,{}),(0,s.jsx)(eE,{setActiveTab:i})]})}),(0,s.jsx)(ek,{value:"buy",className:"mt-0",children:(0,s.jsx)(eA.BuyStakesCard,{})}),(0,s.jsx)(ek,{value:"vaults",className:"mt-0",children:(0,s.jsx)(eL,{})})]})]})})}},67667:(e,t,a)=>{"use strict";a.d(t,{t:()=>o});var s=a(34540),n=a(76736),r=a(2145),i=a(72307),l=a(81100);function o(){let{tokenInfos:e,bondPositions:t,loading:a,error:o,lastUpdated:d}=(0,s.d4)(e=>e.balances),{address:c}=(0,r.F)(),{data:u,isLoading:m}=(0,i.A)({address:c,chainId:l.T.id,token:n.A.tokens.SONIC.address}),p=t=>{let a=e.find(e=>e.symbol===t);return(null==a?void 0:a.allowance)||0n};return{tokenInfos:e,bondPositions:t,nativeBalance:u?u.formatted:"0",isNativeBalanceLoading:m,userAddress:c,loading:a,error:o,lastUpdated:d,getFormattedBalance:t=>{let a=n.A.tokens[t],s=e.find(e=>e.symbol===t);return(Number((null==s?void 0:s.balance)||0n)/Math.pow(10,a.decimals)).toFixed(a.decimals)},getContractBalance:t=>{let a=n.A.tokens[t],s=e.find(e=>e.symbol===t);return(Number((null==s?void 0:s.balance)||0n)/Math.pow(10,a.decimals)).toFixed(a.decimals)},getApproval:p,getFormattedApproval:e=>{let t=n.A.tokens[e];return(Number(p(e))/Math.pow(10,t.decimals)).toFixed(t.decimals)}}}},72585:(e,t,a)=>{Promise.resolve().then(a.bind(a,40203))},83869:(e,t,a)=>{"use strict";a.d(t,{xt:()=>g,Ay:()=>v,zz:()=>y,tk:()=>m,ne:()=>f});var s=a(51990),n=a(5887),r=a(2962),i=a(97351),l=a(75162),o=a(67474);let d=JSON.parse('[{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"allowance","type":"uint256"},{"internalType":"uint256","name":"needed","type":"uint256"}],"name":"ERC20InsufficientAllowance","type":"error"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"uint256","name":"balance","type":"uint256"},{"internalType":"uint256","name":"needed","type":"uint256"}],"name":"ERC20InsufficientBalance","type":"error"},{"inputs":[{"internalType":"address","name":"approver","type":"address"}],"name":"ERC20InvalidApprover","type":"error"},{"inputs":[{"internalType":"address","name":"receiver","type":"address"}],"name":"ERC20InvalidReceiver","type":"error"},{"inputs":[{"internalType":"address","name":"sender","type":"address"}],"name":"ERC20InvalidSender","type":"error"},{"inputs":[{"internalType":"address","name":"spender","type":"address"}],"name":"ERC20InvalidSpender","type":"error"},{"inputs":[],"name":"InvalidInitialization","type":"error"},{"inputs":[],"name":"NotInitializing","type":"error"},{"inputs":[],"name":"ReentrancyGuardReentrantCall","type":"error"},{"inputs":[{"internalType":"address","name":"token","type":"address"}],"name":"SafeERC20FailedOperation","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"contract IAppAuthority","name":"authority","type":"address"}],"name":"AuthorityUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"buyoutPremiumBps","type":"uint256"}],"name":"BuyoutPremiumBpsUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"sender","type":"address"},{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":false,"internalType":"uint256","name":"assets","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"shares","type":"uint256"}],"name":"Deposit","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint64","name":"version","type":"uint64"}],"name":"Initialized","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"RewardsCompounded","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"Staked","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"sender","type":"address"},{"indexed":true,"internalType":"address","name":"receiver","type":"address"},{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":false,"internalType":"uint256","name":"assets","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"shares","type":"uint256"}],"name":"Withdraw","type":"event"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"appToken","outputs":[{"internalType":"contract IERC20","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"asset","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"authority","outputs":[{"internalType":"contract IAppAuthority","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"buyoutPremiumBps","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"shares","type":"uint256"}],"name":"convertToAssets","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"assets","type":"uint256"}],"name":"convertToShares","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"assets","type":"uint256"},{"internalType":"address","name":"receiver","type":"address"}],"name":"deposit","outputs":[{"internalType":"uint256","name":"shares","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"harvest","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"symbol","type":"string"},{"internalType":"address","name":"_staking","type":"address"},{"internalType":"address","name":"_authority","type":"address"}],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"initializePosition","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"maxDeposit","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"maxMint","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"maxRedeem","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"maxWithdraw","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"shares","type":"uint256"},{"internalType":"address","name":"receiver","type":"address"}],"name":"mint","outputs":[{"internalType":"uint256","name":"assets","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"positionValue","outputs":[{"internalType":"uint256","name":"value","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"assets","type":"uint256"}],"name":"previewDeposit","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"shares","type":"uint256"}],"name":"previewMint","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"shares","type":"uint256"}],"name":"previewRedeem","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"assets","type":"uint256"}],"name":"previewWithdraw","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"recreatePosition","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"shares","type":"uint256"},{"internalType":"address","name":"receiver","type":"address"},{"internalType":"address","name":"owner","type":"address"}],"name":"redeem","outputs":[{"internalType":"uint256","name":"assets","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"contract IAppAuthority","name":"_newAuthority","type":"address"}],"name":"setAuthority","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_buyoutPremiumBps","type":"uint256"}],"name":"setBuyoutPremiumBps","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"registry","type":"address"},{"internalType":"uint256","name":"projectID","type":"uint256"}],"name":"setFeeMProjectId","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"staking","outputs":[{"internalType":"contract IAppStaking","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"tokenId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalAssets","outputs":[{"internalType":"uint256","name":"totalManagedAssets","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"assets","type":"uint256"},{"internalType":"address","name":"receiver","type":"address"},{"internalType":"address","name":"owner","type":"address"}],"name":"withdraw","outputs":[{"internalType":"uint256","name":"shares","type":"uint256"}],"stateMutability":"nonpayable","type":"function"}]');var c=a(88579),u=a(76736);let m=(0,s.zD)("vault/fetchVaultInfo",async e=>{let{vault:t,userAddress:a}=e;try{let e=[{address:t.address,abi:d,functionName:"balanceOf",args:[a||"0x0000000000000000000000000000000000000000"]}],s=await (0,n.C)(o.$,{contracts:e});return{address:t.address,name:t.name,symbol:t.symbol,decimals:t.decimals,depositDescription:t.depositDescription,withdrawDescription:t.withdrawDescription,userBalance:a?s[0].result.toString():"0"}}catch(e){throw console.error("Error fetching vault info:",e),e}}),p=(0,s.zD)("vault/fetchAllowance",async e=>{let{vaultAddress:t,userAddress:a}=e;try{return(await (0,n.C)(o.$,{contracts:[{address:u.A.tokens.RZR.address,abi:d,functionName:"allowance",args:[a,t]}]}))[0].result}catch(e){throw console.error("Error fetching allowance:",e),e}}),x=(0,s.zD)("vault/approve",async e=>{let{vaultAddress:t}=e;try{return(await (0,n.C)(o.$,{contracts:[{address:u.A.tokens.RZR.address,abi:d,functionName:"approve",args:[t,c.Ao]}]}))[0].result}catch(e){throw console.error("Error approving:",e),e}}),y=(0,s.zD)("vault/deposit",async e=>{let{vaultAddress:t,amount:a,userAddress:s}=e;try{let{request:e}=await (0,r.v)(o.$,{address:t,abi:d,functionName:"deposit",args:[a,s]}),n=await (0,i.E)(o.$,e);return await (0,l.n)(o.$,{hash:n}),n}catch(e){throw e}}),f=(0,s.zD)("vault/withdraw",async e=>{let{vaultAddress:t,amount:a,userAddress:s}=e;try{let{request:e}=await (0,r.v)(o.$,{address:t,abi:d,functionName:"withdraw",args:[a,s,s]}),n=await (0,i.E)(o.$,e);return await (0,l.n)(o.$,{hash:n}),n}catch(e){throw e}}),h=(0,s.Z0)({name:"vault",initialState:{vaults:{},loading:!1,error:null,isDepositing:!1,depositError:null,depositTxHash:null,isApproving:!1,approveError:null,approveTxHash:null,allowance:null,isWithdrawing:!1,withdrawError:null,withdrawTxHash:null},reducers:{clearVaultState:e=>{e.isDepositing=!1,e.depositError=null,e.depositTxHash=null,e.isApproving=!1,e.approveError=null,e.approveTxHash=null,e.isWithdrawing=!1,e.withdrawError=null,e.withdrawTxHash=null}},extraReducers:e=>{e.addCase(m.pending,e=>{e.loading=!0,e.error=null}).addCase(m.fulfilled,(e,t)=>{e.loading=!1,e.vaults[t.payload.address]=t.payload}).addCase(m.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to fetch vault info"}).addCase(p.fulfilled,(e,t)=>{e.allowance=t.payload}).addCase(x.pending,e=>{e.isApproving=!0,e.approveError=null}).addCase(x.fulfilled,(e,t)=>{e.isApproving=!1,e.approveTxHash=t.payload}).addCase(x.rejected,(e,t)=>{e.isApproving=!1,e.approveError=t.error.message||"Failed to approve"}).addCase(y.pending,e=>{e.isDepositing=!0,e.depositError=null,e.depositTxHash=null}).addCase(y.fulfilled,(e,t)=>{e.isDepositing=!1,e.depositTxHash=t.payload}).addCase(y.rejected,(e,t)=>{e.isDepositing=!1,e.depositError=t.error.message||"Deposit failed"}).addCase(f.pending,e=>{e.isWithdrawing=!0,e.withdrawError=null,e.withdrawTxHash=null}).addCase(f.fulfilled,(e,t)=>{e.isWithdrawing=!1,e.withdrawTxHash=t.payload}).addCase(f.rejected,(e,t)=>{e.isWithdrawing=!1,e.withdrawError=t.error.message||"Withdraw failed"})}}),{clearVaultState:g}=h.actions,v=h.reducer},89852:(e,t,a)=>{"use strict";a.d(t,{p:()=>i});var s=a(95155),n=a(12115),r=a(53999);let i=n.forwardRef((e,t)=>{let{className:a,type:n,...i}=e;return(0,s.jsx)("input",{type:n,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...i})});i.displayName="Input"},95784:(e,t,a)=>{"use strict";a.d(t,{bq:()=>m,eb:()=>f,gC:()=>y,l6:()=>c,yv:()=>u});var s=a(95155),n=a(12115),r=a(31992),i=a(66474),l=a(47863),o=a(5196),d=a(53999);let c=r.bL;r.YJ;let u=r.WT,m=n.forwardRef((e,t)=>{let{className:a,children:n,...l}=e;return(0,s.jsxs)(r.l9,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...l,children:[n,(0,s.jsx)(r.In,{asChild:!0,children:(0,s.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=r.l9.displayName;let p=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(r.PP,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...n,children:(0,s.jsx)(l.A,{className:"h-4 w-4"})})});p.displayName=r.PP.displayName;let x=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(r.wn,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...n,children:(0,s.jsx)(i.A,{className:"h-4 w-4"})})});x.displayName=r.wn.displayName;let y=n.forwardRef((e,t)=>{let{className:a,children:n,position:i="popper",...l}=e;return(0,s.jsx)(r.ZL,{children:(0,s.jsxs)(r.UC,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...l,children:[(0,s.jsx)(p,{}),(0,s.jsx)(r.LM,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,s.jsx)(x,{})]})})});y.displayName=r.UC.displayName,n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(r.JU,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...n})}).displayName=r.JU.displayName;let f=n.forwardRef((e,t)=>{let{className:a,children:n,...i}=e;return(0,s.jsxs)(r.q7,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(r.VF,{children:(0,s.jsx)(o.A,{className:"h-4 w-4"})})}),(0,s.jsx)(r.p4,{children:n})]})});f.displayName=r.q7.displayName,n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(r.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...n})}).displayName=r.wv.displayName}},e=>{var t=t=>e(e.s=t);e.O(0,[8451,4550,2960,5680,2512,2353,1552,8391,8838,1071,9922,2199,4201,4073,8616,1272,8511,8441,1684,7358],()=>t(72585)),_N_E=e.O()}]);