"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5807],{67474:(e,s,a)=>{a.d(s,{$:()=>m});var t=a(29349),r=a(36241),n=a(81100),l=a(63439),o=a(74113),i=a(34324),c=a(51424);let d=(0,l.Qq)([{groupName:"Recommended",wallets:[o.G,i.d,c.O]}],{appName:"RZR Munney",projectId:"c385954abce0db2b929248968af25c16"}),m=(0,t.Z)({chains:[n.T],connectors:d,transports:{[n.T.id]:(0,r.L)("https://rpc.soniclabs.com")}})},67667:(e,s,a)=>{a.d(s,{t:()=>i});var t=a(34540),r=a(76736),n=a(2145),l=a(13558),o=a(81100);function i(){let{tokenInfos:e,bondPositions:s,loading:a,error:i,lastUpdated:c}=(0,t.d4)(e=>e.balances),{address:d}=(0,n.F)(),{data:m,isLoading:x}=(0,l.A)({address:d,chainId:o.T.id,token:r.A.tokens.USDC.address}),p=s=>{let a=e.find(e=>e.symbol===s);return(null==a?void 0:a.allowance)||0n};return{tokenInfos:e,bondPositions:s,nativeBalance:m?m.formatted:"0",isNativeBalanceLoading:x,userAddress:d,loading:a,error:i,lastUpdated:c,getFormattedBalance:s=>{let a=r.A.tokens[s],t=e.find(e=>e.symbol===s);return(Number((null==t?void 0:t.balance)||0n)/Math.pow(10,a.decimals)).toFixed(a.decimals)},getContractBalance:s=>{let a=r.A.tokens[s],t=e.find(e=>e.symbol===s);return(Number((null==t?void 0:t.balance)||0n)/Math.pow(10,a.decimals)).toFixed(a.decimals)},getApproval:p,getFormattedApproval:e=>{let s=r.A.tokens[e];return(Number(p(e))/Math.pow(10,s.decimals)).toFixed(s.decimals)}}}},78958:(e,s,a)=>{a.d(s,{S:()=>F});var t=a(95155),r=a(12115),n=a(93550),l=a(40646),o=a(1243),i=a(51154),c=a(99840),d=a(97168),m=a(41397),x=a(49026),p=a(2145),g=a(6874),u=a.n(g),h=a(65521),f=a(97868),N=a(61046),b=a(76736),j=a(49433);let y=async e=>{let s={...e,slippageLimitPercent:1,disableRFQs:!0,compact:!0},a=await fetch("https://api.odos.xyz/sor/quote/v2/zap",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(200===a.status)return await a.json();console.error("Error in Quote:",a)},v=async(e,s)=>{let a={userAddr:e,pathId:s.pathId,simulate:!0},t=await fetch("https://api.odos.xyz/sor/assemble",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(200===t.status)return await t.json();console.error("Error in Transaction Assembly:",t)};var w=a(81100),A=a(97351),k=a(75162),C=a(67474);let R=(0,h.v)(e=>({isMinting:!1,mintError:null,mintTxHash:null,zapAndMint:async(s,a)=>{e({isMinting:!0,mintError:null,mintTxHash:null});try{let t={chainId:w.T.id,inputTokens:[{tokenAddress:b.A.tokens.WRAPPED_SONIC.address,amount:(0,f.g)(s).toString()}],outputTokens:[{tokenAddress:b.A.tokens.RZR.address,proportion:1}],userAddr:b.A.coreAddresses.uiHelper},r=await y(t);if(!r)throw Error("invalid quote from odos");let n=await v(b.A.coreAddresses.uiHelper,r);if(console.log("\uD83D\uDE80 ~ zapAndMint: ~ odosData:",n),!n)throw Error("invalid tx data from odos");console.log("\uD83D\uDE80 ~ zapAndMint: ~ odosData:",a,(0,f.g)(s).toString(),b.A.tokens.WRAPPED_SONIC.address,n.transaction.data);let l=await (0,A.E)(C.$,{address:b.A.coreAddresses.uiHelper,abi:j,functionName:"zapAndMint",args:[a,(0,f.g)(s),N.Xd,n.transaction.data],value:(0,f.g)(s)}),o=await (0,k.n)(C.$,{hash:l});console.log("\uD83D\uDE80 ~ zapAndMint: ~ receipt:",o),e({mintTxHash:l})}catch(s){console.error("Mint failed:",s),e({mintError:"Mint failed. Please try again."})}finally{e({isMinting:!1})}}}));var S=a(53999),E=a(9428),M=a(2962),T=a(99190),I=a(89090),O=a(88579);function F(e){let{isOpen:s,onClose:a,mintData:g}=e,[h,f]=(0,r.useState)("confirm"),{address:N}=(0,p.F)(),{isMinting:j,mintError:y,mintTxHash:v,zapAndMint:w}=R(),{allowance:F,isApproving:P,approveError:$,approveTxHash:W,fetchAllowance:Z,approve:_}=function(){let{address:e}=(0,p.F)(),[s,a]=(0,r.useState)(null),[t,n]=(0,r.useState)(!1),[l,o]=(0,r.useState)(null),[i,c]=(0,r.useState)(null),d=(0,r.useCallback)(async(s,t)=>{if(e)try{let r=await (0,E.J)(C.$,{address:s,abi:T,functionName:"allowance",args:[e,t]});a(r)}catch(e){console.error("Error fetching allowance:",e),a(null)}},[e]),m=(0,r.useCallback)(async(s,a,t)=>{if(!e){o("Wallet not connected");return}n(!0),o(null),c(null);try{let{request:e}=await (0,M.v)(C.$,{address:s,abi:T,functionName:"approve",args:[a,t]}),r=await (0,A.E)(C.$,e);c(r),await (0,k.n)(C.$,{hash:r}),await d(s,a)}catch(e){console.error("Approval failed:",e),o(e instanceof Error?e.message:"Approval failed")}finally{n(!1)}},[e,d]);return{allowance:s,isApproving:t,approveError:l,approveTxHash:i,fetchAllowance:d,approve:m}}();if(!g)return null;let z=Number.parseFloat(g.amount||"0"),H=Number.parseFloat(g.dreAmount||"0"),D=(0,I.X)(g.amount,18);(0,r.useEffect)(()=>{s&&N&&Z(b.A.tokens.WRAPPED_SONIC.address,b.A.coreAddresses.uiHelper)},[s,N,Z]);let L=async()=>{if(!N){f("error");return}!F||F<D?await q():await B()},q=async()=>{f("approve"),await _(b.A.tokens.WRAPPED_SONIC.address,b.A.coreAddresses.uiHelper,O.Ao.toString()),$?f("error"):W&&(f("mint"),await B())},B=async()=>{if(!N){f("error");return}f("mint"),await w(g.amount,N),y?f("error"):v&&f("success")},J=()=>{f("confirm"),a()},Q=()=>{switch(h){case"confirm":case"error":default:return 0;case"approve":return 25;case"mint":return 50;case"success":return 100}};return(0,t.jsx)(c.lG,{open:s,onOpenChange:J,children:(0,t.jsxs)(c.Cf,{className:"sm:max-w-md bg-gray-900 border-gray-700",children:[(0,t.jsxs)(c.c7,{children:[(0,t.jsxs)(c.L3,{className:"flex items-center gap-2 text-white",children:[(0,t.jsx)(n.A,{className:"h-5 w-5 text-gold-400"}),"Mint RZR"]}),(0,t.jsx)(c.rr,{className:"text-gray-400",children:"Convert Wrapped SONIC to RZR"})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Transaction Progress"}),(0,t.jsxs)("span",{className:"text-gold-400",children:[Q(),"%"]})]}),(0,t.jsx)(m.k,{value:Q(),className:"h-2 bg-gray-700",indicatorClassName:"bg-gradient-to-r from-gold-500 to-gold-600"})]}),(0,t.jsxs)("div",{className:"rounded-xl bg-gray-800/50 border border-gray-700/50 p-4 space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"Wrapped SONIC Amount"}),(0,t.jsxs)("span",{className:"text-sm font-mono text-white",children:[(0,S.ej)(z)," Wrapped SONIC"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"RZR to Mint"}),(0,t.jsxs)("span",{className:"text-sm font-mono text-gold-400",children:[(0,S.ej)(H)," RZR"]})]})]}),"success"===h&&(0,t.jsxs)(x.Fc,{className:"bg-green-500/10 border-green-500/30",children:[(0,t.jsx)(l.A,{className:"h-4 w-4 text-green-400"}),(0,t.jsxs)(x.TN,{className:"text-gray-300",children:[(0,t.jsx)("strong",{children:"Success!"})," ",(0,S.ej)(H)," RZR minted.",(0,t.jsx)("div",{className:"mt-2 space-y-1",children:(0,t.jsx)("div",{className:"text-xs font-mono text-green-400",children:(0,t.jsx)(u(),{href:"https://sonicscan.org/tx/".concat(v),target:"_blank",className:"text-green-400",children:"View Transaction on Explorer"})})})]})]}),"error"===h&&(0,t.jsxs)(x.Fc,{className:"bg-red-500/10 border-red-500/30",children:[(0,t.jsx)(o.A,{className:"h-4 w-4 text-red-400"}),(0,t.jsxs)(x.TN,{className:"text-gray-300",children:[(0,t.jsx)("strong",{children:"Error:"})," ",y||$||"Transaction failed"]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:["confirm"===h&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)(n.A,{className:"h-12 w-12 text-gold-400 mx-auto"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Confirm Mint"}),(0,t.jsxs)("p",{className:"text-sm text-gray-400",children:["Mint ",(0,S.ej)(H)," RZR"]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(d.$,{variant:"outline",className:"flex-1 border-gray-600 text-gray-300 hover:bg-gray-800",onClick:J,children:"Cancel"}),(0,t.jsx)(d.$,{className:"flex-1 bg-gradient-to-r from-gold-500 to-gold-600 hover:from-gold-600 hover:to-gold-700 text-black",onClick:L,children:"Proceed"})]})]}),"approve"===h&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)(n.A,{className:"h-12 w-12 text-gold-400 mx-auto"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Approve Wrapped SONIC"}),(0,t.jsx)("p",{className:"text-sm text-gray-400",children:"Approve Wrapped SONIC for minting"})]}),(0,t.jsx)(d.$,{className:"w-full bg-gradient-to-r from-gold-500 to-gold-600 hover:from-gold-600 hover:to-gold-700 text-black",disabled:P,children:P?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Approving..."]}):"Approve Wrapped SONIC"})]}),"mint"===h&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)(n.A,{className:"h-12 w-12 text-gold-400 mx-auto"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Mint RZR"}),(0,t.jsx)("p",{className:"text-sm text-gray-400",children:"Converting Wrapped SONIC to RZR"})]}),(0,t.jsx)(d.$,{className:"w-full bg-gradient-to-r from-gold-500 to-gold-600 hover:from-gold-600 hover:to-gold-700 text-black",disabled:j,children:j?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Minting..."]}):"Execute Mint"})]}),"success"===h&&(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsx)(d.$,{className:"w-full bg-gradient-to-r from-gold-500 to-gold-600 hover:from-gold-600 hover:to-gold-700 text-black",onClick:J,children:"Close"})}),"error"===h&&(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsx)(d.$,{variant:"outline",className:"w-full border-gray-600 text-gray-300 hover:bg-gray-800",onClick:()=>f("confirm"),children:"Try Again"})})]})]})]})})}},89852:(e,s,a)=>{a.d(s,{p:()=>l});var t=a(95155),r=a(12115),n=a(53999);let l=r.forwardRef((e,s)=>{let{className:a,type:r,...l}=e;return(0,t.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...l})});l.displayName="Input"}}]);