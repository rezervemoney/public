"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5807],{67474:(e,s,a)=>{a.d(s,{$:()=>m});var r=a(29349),t=a(36241),n=a(81100),l=a(63439),i=a(74113),o=a(34324),c=a(51424);let d=(0,l.Qq)([{groupName:"Recommended",wallets:[i.G,o.d,c.O]}],{appName:"RZR Munney",projectId:"c385954abce0db2b929248968af25c16"}),m=(0,r.Z)({chains:[n.T],connectors:d,transports:{[n.T.id]:(0,t.L)("https://rpc.soniclabs.com")}})},67667:(e,s,a)=>{a.d(s,{t:()=>o});var r=a(34540),t=a(76736),n=a(2145),l=a(13558),i=a(81100);function o(){let{tokenInfos:e,bondPositions:s,loading:a,error:o,lastUpdated:c}=(0,r.d4)(e=>e.balances),{address:d}=(0,n.F)(),{data:m,isLoading:u}=(0,l.A)({address:d,chainId:i.T.id,token:t.A.tokens.USDC.address}),p=s=>{let a=e.find(e=>e.symbol===s);return(null==a?void 0:a.allowance)||0n};return{tokenInfos:e,bondPositions:s,nativeBalance:m?m.formatted:"0",isNativeBalanceLoading:u,userAddress:d,loading:a,error:o,lastUpdated:c,getFormattedBalance:s=>{let a=t.A.tokens[s],r=e.find(e=>e.symbol===s);return(Number((null==r?void 0:r.balance)||0n)/Math.pow(10,a.decimals)).toFixed(a.decimals)},getContractBalance:s=>{let a=t.A.tokens[s],r=e.find(e=>e.symbol===s);return(Number((null==r?void 0:r.balance)||0n)/Math.pow(10,a.decimals)).toFixed(a.decimals)},getApproval:p,getFormattedApproval:e=>{let s=t.A.tokens[e];return(Number(p(e))/Math.pow(10,s.decimals)).toFixed(s.decimals)}}}},78958:(e,s,a)=>{a.d(s,{S:()=>F});var r=a(95155),t=a(12115),n=a(40646),l=a(51154),i=a(99840),o=a(97168),c=a(41397),d=a(49026),m=a(2145),u=a(6874),p=a.n(u),x=a(65521),g=a(97868),f=a(61046),h=a(76736),b=a(49433);let y=async e=>{let s={...e,slippageLimitPercent:1,disableRFQs:!0,compact:!0},a=await fetch("https://api.odos.xyz/sor/quote/v2/zap",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(200===a.status)return await a.json();console.error("Error in Quote:",a)},N=async(e,s)=>{let a={userAddr:e,pathId:s.pathId,simulate:!0},r=await fetch("https://api.odos.xyz/sor/assemble",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(200===r.status)return await r.json();console.error("Error in Transaction Assembly:",r)};var j=a(81100),v=a(97351),w=a(75162),A=a(67474);let k=(0,x.v)(e=>({isMinting:!1,mintError:null,mintTxHash:null,zapAndMint:async(s,a)=>{e({isMinting:!0,mintError:null,mintTxHash:null});try{let r={chainId:j.T.id,inputTokens:[{tokenAddress:"0x0000000000000000000000000000000000000000",amount:(0,g.g)(s).toString()}],outputTokens:[{tokenAddress:h.A.tokens.scUSD.address,proportion:1}],userAddr:h.A.coreAddresses.uiHelper},t=await y(r);if(!t)throw Error("invalid quote from odos");let n=await N(h.A.coreAddresses.uiHelper,t);if(console.log("\uD83D\uDE80 ~ zapAndMint: ~ odosData:",n),!n)throw Error("invalid tx data from odos");console.log("\uD83D\uDE80 ~ zapAndMint: ~ odosData:",a,(0,g.g)(s).toString(),h.A.tokens.scUSD.address,n.transaction.data);let l=await (0,v.E)(A.$,{address:h.A.coreAddresses.uiHelper,abi:b,functionName:"zapAndMint",args:[a,(0,g.g)(s),f.Xd,n.transaction.data],value:(0,g.g)(s)}),i=await (0,w.n)(A.$,{hash:l});console.log("\uD83D\uDE80 ~ zapAndMint: ~ receipt:",i),e({mintTxHash:l})}catch(s){console.error("Mint failed:",s),e({mintError:"Mint failed. Please try again."})}finally{e({isMinting:!1})}}}));var S=a(53999),T=a(9428),C=a(2962),M=a(99190),E=a(89090),R=a(88579);function F(e){let{isOpen:s,onClose:a,mintData:u}=e,[x,g]=(0,t.useState)("confirm"),{address:f}=(0,m.F)(),{isMinting:b,mintError:y,mintTxHash:N,zapAndMint:j}=k(),{allowance:F,isApproving:$,approveError:z,approveTxHash:H,fetchAllowance:D,approve:Z}=function(){let{address:e}=(0,m.F)(),[s,a]=(0,t.useState)(null),[r,n]=(0,t.useState)(!1),[l,i]=(0,t.useState)(null),[o,c]=(0,t.useState)(null),d=(0,t.useCallback)(async(s,r)=>{if(e)try{let t=await (0,T.J)(A.$,{address:s,abi:M,functionName:"allowance",args:[e,r]});a(t)}catch(e){console.error("Error fetching allowance:",e),a(null)}},[e]),u=(0,t.useCallback)(async(s,a,r)=>{if(!e){i("Wallet not connected");return}n(!0),i(null),c(null);try{let{request:e}=await (0,C.v)(A.$,{address:s,abi:M,functionName:"approve",args:[a,r]}),t=await (0,v.E)(A.$,e);c(t),await (0,w.n)(A.$,{hash:t}),await d(s,a)}catch(e){console.error("Approval failed:",e),i(e instanceof Error?e.message:"Approval failed")}finally{n(!1)}},[e,d]);return{allowance:s,isApproving:r,approveError:l,approveTxHash:o,fetchAllowance:d,approve:u}}();if(!u)return null;let I=Number.parseFloat(u.amount||"0"),O=Number.parseFloat(u.dreAmount||"0"),P=(0,E.X)(u.amount,18);(0,t.useEffect)(()=>{s&&f&&D(h.A.tokens.scUSD.address,h.A.coreAddresses.uiHelper)},[s,f,D]);let U=async()=>{if(!f){g("error");return}!F||F<P?await _():await L()},_=async()=>{g("approve"),await Z(h.A.tokens.scUSD.address,h.A.coreAddresses.uiHelper,R.Ao.toString()),z?g("error"):H&&(g("mint"),await L())},L=async()=>{if(!f){g("error");return}g("mint"),await j(u.amount,f),y?g("error"):N&&g("success")},q=()=>{g("confirm"),a()},B=()=>{switch(x){case"confirm":case"error":default:return 0;case"approve":return 25;case"mint":return 50;case"success":return 100}};return(0,r.jsx)(i.lG,{open:s,onOpenChange:q,children:(0,r.jsxs)(i.Cf,{className:"sm:max-w-md bg-gray-100 border-gray-700",children:[(0,r.jsxs)(i.c7,{children:[(0,r.jsx)(i.L3,{className:"flex items-center gap-2 text-gray-700",children:"Mint RZR"}),(0,r.jsx)(i.rr,{className:"text-gray-400",children:"Automatically convert your assets into RZR"})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Transaction Progress"}),(0,r.jsxs)("span",{className:"text-gold-400",children:[B(),"%"]})]}),(0,r.jsx)(c.k,{value:B(),className:"h-2 bg-gray-700",indicatorClassName:"bg-gradient-to-r from-gold-500 to-gold-600"})]}),(0,r.jsxs)("div",{className:"rounded-md bg-white border border-gray-300 p-4 space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-400",children:"Your Assets"}),(0,r.jsxs)("span",{className:"text-sm font-mono text-gray-700",children:[(0,S.ej)(I)," S"]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-400",children:"sRZR to Receive"}),(0,r.jsxs)("span",{className:"text-sm font-mono text-gold-400",children:[(0,S.ej)(O)," sRZR"]})]})]}),"success"===x&&(0,r.jsxs)(d.Fc,{className:"bg-green-500/10 border-green-500/30",children:[(0,r.jsx)(n.A,{className:"h-4 w-4 text-green-400"}),(0,r.jsxs)(d.TN,{className:"text-gray-300",children:[(0,r.jsx)("strong",{children:"Success!"})," ",(0,S.ej)(O)," RZR minted.",(0,r.jsx)("div",{className:"mt-2 space-y-1",children:(0,r.jsx)("div",{className:"text-xs font-mono text-green-400",children:(0,r.jsx)(p(),{href:"https://sonicscan.org/tx/".concat(N),target:"_blank",className:"text-green-400",children:"View Transaction on Explorer"})})})]})]}),"error"===x&&(0,r.jsx)(d.Fc,{className:"bg-red-500/10 border-red-500/30",children:(0,r.jsxs)(d.TN,{className:"text-gray-800",children:[(0,r.jsx)("strong",{children:"Error:"})," ",y||z||"Transaction failed"]})}),(0,r.jsxs)("div",{className:"space-y-3",children:["confirm"===x&&(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(o.$,{variant:"outline",className:"flex-1 text-gray-600 border-gray-500",onClick:q,children:"Cancel"}),(0,r.jsx)(o.$,{className:"flex-1 bg-gradient-to-r from-blue-primary text-white to-yellow-primary",onClick:U,children:"Mint"})]})}),"approve"===x&&(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsx)(o.$,{className:"w-full bg-gradient-to-r text-white",disabled:$,onClick:_,children:$?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Approving..."]}):"Approve"})}),"mint"===x&&(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsx)(o.$,{className:"w-full bg-gradient-to-r from-gold-500 to-gold-600 hover:from-gold-600 hover:to-gold-700 text-black",disabled:b,onClick:L,children:b?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Minting..."]}):"Execute Mint"})}),"success"===x&&(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsx)(o.$,{className:"w-full bg-gradient-to-r from-gold-500 to-gold-600 hover:from-gold-600 hover:to-gold-700 text-black",onClick:q,children:"Close"})}),"error"===x&&(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsx)(o.$,{variant:"outline",className:"w-full text-gray-600",onClick:()=>g("confirm"),children:"Try Again"})})]})]})]})})}},89852:(e,s,a)=>{a.d(s,{p:()=>l});var r=a(95155),t=a(12115),n=a(53999);let l=t.forwardRef((e,s)=>{let{className:a,type:t,...l}=e;return(0,r.jsx)("input",{type:t,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...l})});l.displayName="Input"}}]);