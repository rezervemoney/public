"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5807],{67474:(e,s,a)=>{a.d(s,{$:()=>m});var t=a(29349),r=a(36241),n=a(81100),l=a(63439),o=a(74113),i=a(34324),c=a(51424);let d=(0,l.Qq)([{groupName:"Recommended",wallets:[o.G,i.d,c.O]}],{appName:"RZR Munney",projectId:"c385954abce0db2b929248968af25c16"}),m=(0,t.Z)({chains:[n.T],connectors:d,transports:{[n.T.id]:(0,r.L)("https://rpc.soniclabs.com")}})},67667:(e,s,a)=>{a.d(s,{t:()=>i});var t=a(34540),r=a(76736),n=a(2145),l=a(13558),o=a(81100);function i(){let{tokenInfos:e,bondPositions:s,loading:a,error:i,lastUpdated:c}=(0,t.d4)(e=>e.balances),{address:d}=(0,n.F)(),{data:m,isLoading:u}=(0,l.A)({address:d,chainId:o.T.id,token:r.A.tokens.USDC.address}),x=s=>{let a=e.find(e=>e.symbol===s);return(null==a?void 0:a.allowance)||0n};return{tokenInfos:e,bondPositions:s,nativeBalance:m?m.formatted:"0",isNativeBalanceLoading:u,userAddress:d,loading:a,error:i,lastUpdated:c,getFormattedBalance:s=>{let a=r.A.tokens[s],t=e.find(e=>e.symbol===s);return(Number((null==t?void 0:t.balance)||0n)/Math.pow(10,a.decimals)).toFixed(a.decimals)},getContractBalance:s=>{let a=r.A.tokens[s],t=e.find(e=>e.symbol===s);return(Number((null==t?void 0:t.balance)||0n)/Math.pow(10,a.decimals)).toFixed(a.decimals)},getApproval:x,getFormattedApproval:e=>{let s=r.A.tokens[e];return(Number(x(e))/Math.pow(10,s.decimals)).toFixed(s.decimals)}}}},78958:(e,s,a)=>{a.d(s,{S:()=>I});var t=a(95155),r=a(12115),n=a(40646),l=a(93550),o=a(51154),i=a(99840),c=a(97168),d=a(41397),m=a(49026),u=a(2145),x=a(6874),p=a.n(x),g=a(65521),h=a(97868),f=a(61046),N=a(76736),b=a(49433);let y=async e=>{let s={...e,slippageLimitPercent:1,disableRFQs:!0,compact:!0},a=await fetch("https://api.odos.xyz/sor/quote/v2/zap",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(200===a.status)return await a.json();console.error("Error in Quote:",a)},j=async(e,s)=>{let a={userAddr:e,pathId:s.pathId,simulate:!0},t=await fetch("https://api.odos.xyz/sor/assemble",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(200===t.status)return await t.json();console.error("Error in Transaction Assembly:",t)};var v=a(81100),w=a(97351),A=a(75162),k=a(67474);let C=(0,g.v)(e=>({isMinting:!1,mintError:null,mintTxHash:null,zapAndMint:async(s,a)=>{e({isMinting:!0,mintError:null,mintTxHash:null});try{let t={chainId:v.T.id,inputTokens:[{tokenAddress:N.A.tokens.WRAPPED_SONIC.address,amount:(0,h.g)(s).toString()}],outputTokens:[{tokenAddress:N.A.tokens.RZR.address,proportion:1}],userAddr:N.A.coreAddresses.uiHelper},r=await y(t);if(!r)throw Error("invalid quote from odos");let n=await j(N.A.coreAddresses.uiHelper,r);if(console.log("\uD83D\uDE80 ~ zapAndMint: ~ odosData:",n),!n)throw Error("invalid tx data from odos");console.log("\uD83D\uDE80 ~ zapAndMint: ~ odosData:",a,(0,h.g)(s).toString(),N.A.tokens.WRAPPED_SONIC.address,n.transaction.data);let l=await (0,w.E)(k.$,{address:N.A.coreAddresses.uiHelper,abi:b,functionName:"zapAndMint",args:[a,(0,h.g)(s),f.Xd,n.transaction.data],value:(0,h.g)(s)}),o=await (0,A.n)(k.$,{hash:l});console.log("\uD83D\uDE80 ~ zapAndMint: ~ receipt:",o),e({mintTxHash:l})}catch(s){console.error("Mint failed:",s),e({mintError:"Mint failed. Please try again."})}finally{e({isMinting:!1})}}}));var R=a(53999),S=a(9428),E=a(2962),T=a(99190),M=a(89090),F=a(88579);function I(e){let{isOpen:s,onClose:a,mintData:x}=e,[g,h]=(0,r.useState)("confirm"),{address:f}=(0,u.F)(),{isMinting:b,mintError:y,mintTxHash:j,zapAndMint:v}=C(),{allowance:I,isApproving:O,approveError:P,approveTxHash:$,fetchAllowance:Z,approve:W}=function(){let{address:e}=(0,u.F)(),[s,a]=(0,r.useState)(null),[t,n]=(0,r.useState)(!1),[l,o]=(0,r.useState)(null),[i,c]=(0,r.useState)(null),d=(0,r.useCallback)(async(s,t)=>{if(e)try{let r=await (0,S.J)(k.$,{address:s,abi:T,functionName:"allowance",args:[e,t]});a(r)}catch(e){console.error("Error fetching allowance:",e),a(null)}},[e]),m=(0,r.useCallback)(async(s,a,t)=>{if(!e){o("Wallet not connected");return}n(!0),o(null),c(null);try{let{request:e}=await (0,E.v)(k.$,{address:s,abi:T,functionName:"approve",args:[a,t]}),r=await (0,w.E)(k.$,e);c(r),await (0,A.n)(k.$,{hash:r}),await d(s,a)}catch(e){console.error("Approval failed:",e),o(e instanceof Error?e.message:"Approval failed")}finally{n(!1)}},[e,d]);return{allowance:s,isApproving:t,approveError:l,approveTxHash:i,fetchAllowance:d,approve:m}}();if(!x)return null;let _=Number.parseFloat(x.amount||"0"),z=Number.parseFloat(x.dreAmount||"0"),H=(0,M.X)(x.amount,18);(0,r.useEffect)(()=>{s&&f&&Z(N.A.tokens.WRAPPED_SONIC.address,N.A.coreAddresses.uiHelper)},[s,f,Z]);let D=async()=>{if(!f){h("error");return}!I||I<H?await L():await q()},L=async()=>{h("approve"),await W(N.A.tokens.WRAPPED_SONIC.address,N.A.coreAddresses.uiHelper,F.Ao.toString()),P?h("error"):$&&(h("mint"),await q())},q=async()=>{if(!f){h("error");return}h("mint"),await v(x.amount,f),y?h("error"):j&&h("success")},B=()=>{h("confirm"),a()},J=()=>{switch(g){case"confirm":case"error":default:return 0;case"approve":return 25;case"mint":return 50;case"success":return 100}};return(0,t.jsx)(i.lG,{open:s,onOpenChange:B,children:(0,t.jsxs)(i.Cf,{className:"sm:max-w-md bg-gray-100 border-gray-700",children:[(0,t.jsxs)(i.c7,{children:[(0,t.jsx)(i.L3,{className:"flex items-center gap-2 text-gray-700",children:"Mint RZR"}),(0,t.jsx)(i.rr,{className:"text-gray-400",children:"Automatically convert your assets into RZR"})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Transaction Progress"}),(0,t.jsxs)("span",{className:"text-gold-400",children:[J(),"%"]})]}),(0,t.jsx)(d.k,{value:J(),className:"h-2 bg-gray-700",indicatorClassName:"bg-gradient-to-r from-gold-500 to-gold-600"})]}),(0,t.jsxs)("div",{className:"rounded-md bg-white border border-gray-300 p-4 space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"Your Assets"}),(0,t.jsxs)("span",{className:"text-sm font-mono text-gray-700",children:[(0,R.ej)(_)," S"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"sRZR to Receive"}),(0,t.jsxs)("span",{className:"text-sm font-mono text-gold-400",children:[(0,R.ej)(z)," sRZR"]})]})]}),"success"===g&&(0,t.jsxs)(m.Fc,{className:"bg-green-500/10 border-green-500/30",children:[(0,t.jsx)(n.A,{className:"h-4 w-4 text-green-400"}),(0,t.jsxs)(m.TN,{className:"text-gray-300",children:[(0,t.jsx)("strong",{children:"Success!"})," ",(0,R.ej)(z)," RZR minted.",(0,t.jsx)("div",{className:"mt-2 space-y-1",children:(0,t.jsx)("div",{className:"text-xs font-mono text-green-400",children:(0,t.jsx)(p(),{href:"https://sonicscan.org/tx/".concat(j),target:"_blank",className:"text-green-400",children:"View Transaction on Explorer"})})})]})]}),"error"===g&&(0,t.jsx)(m.Fc,{className:"bg-red-500/10 border-red-500/30",children:(0,t.jsxs)(m.TN,{className:"text-gray-800",children:[(0,t.jsx)("strong",{children:"Error:"})," ",y||P||"Transaction failed"]})}),(0,t.jsxs)("div",{className:"space-y-3",children:["confirm"===g&&(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(c.$,{variant:"outline",className:"flex-1 text-gray-600 border-gray-500",onClick:B,children:"Cancel"}),(0,t.jsx)(c.$,{className:"flex-1 bg-gradient-to-r from-blue-primary text-white to-yellow-primary",onClick:D,children:"Mint"})]})}),"approve"===g&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)(l.A,{className:"h-12 w-12 text-gold-400 mx-auto"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Approve Wrapped SONIC"}),(0,t.jsx)("p",{className:"text-sm text-gray-400",children:"Approve Wrapped SONIC for minting"})]}),(0,t.jsx)(c.$,{className:"w-full bg-gradient-to-r from-gold-500 to-gold-600 hover:from-gold-600 hover:to-gold-700 text-black",disabled:O,children:O?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Approving..."]}):"Approve Wrapped SONIC"})]}),"mint"===g&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)(l.A,{className:"h-12 w-12 text-gold-400 mx-auto"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Mint RZR"}),(0,t.jsx)("p",{className:"text-sm text-gray-400",children:"Converting Wrapped SONIC to RZR"})]}),(0,t.jsx)(c.$,{className:"w-full bg-gradient-to-r from-gold-500 to-gold-600 hover:from-gold-600 hover:to-gold-700 text-black",disabled:b,children:b?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Minting..."]}):"Execute Mint"})]}),"success"===g&&(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsx)(c.$,{className:"w-full bg-gradient-to-r from-gold-500 to-gold-600 hover:from-gold-600 hover:to-gold-700 text-black",onClick:B,children:"Close"})}),"error"===g&&(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsx)(c.$,{variant:"outline",className:"w-full text-gray-600",onClick:()=>h("confirm"),children:"Try Again"})})]})]})]})})}},89852:(e,s,a)=>{a.d(s,{p:()=>l});var t=a(95155),r=a(12115),n=a(53999);let l=r.forwardRef((e,s)=>{let{className:a,type:r,...l}=e;return(0,t.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...l})});l.displayName="Input"}}]);